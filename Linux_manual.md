2023.08.06 16:28に追記①

## Vimの基本的な使い方について整理

Linux操作をする時には使用するVim操作であるが、普段は使用する機会が無い為なかなか覚え辛い
基本的なコマンドを下記の通り説明していく。
どちらかという他人に読んでもらうよりも自分の頭の整理をする為に書くような感じになりそうだ 笑

先ず、初めにVim操作時のモードを紹介します。
|      名前  |      意味       |     主な機能 | 起動の仕方|
|:-----------|---------------:|:------------:|:--------:|
| NormalMode |入力モード       | カーソル移動等|  Esc     |
| InsertMode | 文字入力モード   | テキストの入力と編集|a/i/A/l/ciw|
| VisualMOde | 文字選択モード   | テキストの選択|   v      |
|CommandMode |コマンドモード    |ファイルの保存等|         | 
Vimには上記の4モードがあり、これらを適宜使い分けていきます。


## カーソル移動などの基本的な操作
-----------------------------------------------------
| 操作ボタン  | 機能        |
|:-----------|------------:|
| h          | 左へ移動        |
| j          | 下へ移動      |
| k          | 上へ移動        |
| l          | 右へ移動        |
入力モード中は上記の４ボタンを使ってカーソルを移動させます。
ボタンを押し続けたら連続して同じ方向へ進むことができます。

## 文字の編集(削除、挿入、追加)について
--------------------------------------------------------
| 操作ボタン  |    機能     |
|:-----------|------------:|
| x          | カーソルの下にある文字を削除        |
| i          | カーソルの場所から文字を挿入     |
| a          | カーソルの次の位置から挿入|
| A          | 行末に文字を追加できる        |
| o(小文字)  | カーソル位置から下に一行追加して入力する |
| O(大文字)  |カーソル位置から上にいい行追加して入力する|
※1, 大文字の場合はshiftを押しながら、若しくはCAPS LOCKが有効の状態
　CAPS LOCKが有効だと他の文字も小文字大文字が逆になるのでおすすめしません。
※2, INSERT MODE中はバックスペースで文字を削除できます。


## ファイルの編集方法
-------------------------------------------
| 操作ボタン  |    機能     | 
|:-----------|------------:|
| :wq        | ファイルを保存して終了        |
| :q!        | ファイルを保存せずに強勢終了   |
| :w         | ファイルの上書き保存          |
| :q         | ファイルを保存せずに終了       |
| :w!        | ファイルを保存して強勢終了     |
※!が入ると強勢終了です。

## 削除コマンド
------------------------------------------------------------
| 操作ボタン  |     機能    |
|:-----------|------------:|
| dw         | カーソル位置から単語を削除する(空白を含む)   |
| d$         | カーソル位置から行末まで削除する      |
| de         | カーソル位置から単語を削除する(空白含まず)   |
| dd         | 行を削除          |
※1, w は word の略と考えて 単語には空白も含む
※2, e は end of wordの略と考えて 単語には空白含まず
※3, dd は 頭に数字を付けるとその数だけ行を削除できる
    　削除した内容はVimのレジスタに格納される

## 移動コマンド
--------------------------------------------------------
| 操作ボタン  |    機能     |
|:-----------|------------:|
| w          | 次の単語の頭文字まで移動        |
| e          | 次の単語の末尾まで移動      |
| 0          | 行の頭に移動        |
| G          | ファイル内の最終行          |
| gg         | ファイル内の先頭行       |
| 行数 + G   | 行数のところに移動     |
| Ctrl + g   | カーソル位置の行数確認     |
※ + は 一緒に押すイメージであり、+ボタンを押すわけではない


## コマンド・数字・モーションで コマンドを１回押すよりも多くの処理が可能
-------------------------------------------------------------

d(コマンド) 数字(回数) モーション(対象)

例えば、d2w であれば カーソル位置から空白を含めて２語削除可能

目的に合わせてそれぞれの内容を変えれば、より効率的に作業できます。

## やり直しコマンド
--------------------------------------------------------------

| 操作ボタン  |     機能    |
|:-----------|------------:|
| u          | 最後のコマンドを取り消す        |
| U          | 行全体のコマンドを取り消す      |
| Ctrl + r   | 取り消しの取り消しコマンド        |


## 貼り付けコマンド
--------------------------------------------------------------

| 操作ボタン  |     機能    |
|:-----------|------------:|
| p          | カーソルの後に貼り付ける        |


## 置き換え、変更コマンド
--------------------------------------------------------------

| 操作ボタン  |     機能    |
|:-----------|------------:|
| r          | カーソル直下の1文字を消して置き換える     |
| R          | カーソル直下の文字から消して任意文字数置き換える|
| ce         | カーソル直下の単語を消して代わりの文字入力|
| cw         | カーソル直下の単語を消して代わりの文字を入力|
| c$         | カーソルと同じ行を消して代わりの文字を入力  |
|: s/対象1/対象2| 最初に見つけた対象1を対象2で置き換える |
|: s/対象1/対象2/g| 行内の対象1全てを対象2に置き換える|
|:#,#s/対象1/対象2/g|#,#は行番号、指定行内で置き換える|
|:%s/対象1/対象2/g| ファイル全体で検索して見つかるものを置き換え|
|:%s/対象1/対象2/gc|ファイル全体で見つかるものを確認しながら置換｜
※1, ce は単語の中に空白む。単語前に空白があると一緒に削除
※2, cw は単語を含まない。単語前に空白があると空白だけ削除
※3, : と s はつなげて入力する


## 検索コマンド
--------------------------------------------------------------

| 操作ボタン  |     機能    |
|:-----------|------------:|
| / + 単語    | 後に続く単語の検索        |
| n          | / + 単語で同じ語を検索する時に使う   |
| N          | / + 単語で同じ語を逆検索する時に使う      |
| ? + 単語   | | / + 単語で同じ語を逆検索する時に使う   |
| %          | 括弧の上で押すと対となる括弧の所に移動     |
※1, % は括弧から離れた所で押すと一番近くにある括弧と対になる括弧の所へ移動します。

## 外部コマンド(外部シェルコマンド)
--------------------------------------------------------------

| 操作ボタン  |    機能     |
|:-----------|------------:|
| :!ls       | ディレクトリ一覧の表示        |
| :!dir      | ディレクトリ一覧の表示      |
※:を押すことでコマンドモードになりますが、ENTERを押して終了します。

## ファイルへ書き込みなど
--------------------------------------------------------------

|  操作ボタン |     機能    |
|:-----------|------------:|
| :w ファイル名| ファイル全体をファイル名で保存できる |
| :r ファイル名| カーソル下にファイル内容を出力する  |


## 選択してからのファイル書き込み
--------------------------------------------------------------
`v`を押すことで、Visual Modeになります。
文字を範囲選択することができるので、カーソルを動かすことで範囲を選択します。
選択された部分は色が変わって強調表示されます。
選択が終わったら`:`を押します。
すると画面の最下部(コマンド入力する所)に下記の文字列が出ます。
`:'<,'>`
上記の文字に続けて`w ファイル名`と入力してください。
`ENTER`を押すことでファイル名に選択した内容が保存されます。
今回は`W`を入力したので指定のファイル名内に選択した内容が保存されましたが、`d`を押せば削除になり、状況に合わせて使い分けが可能です。
ちなみに先程保存したファイルを使って`:r ファイル名`と実行すればファイルの内容をカーソル位置に挿入できます。

## テキストのコピーとペースト
--------------------------------------------------------------
| 操作ボタン  |     機能    |
|:-----------|------------:|
| y          | 選択した内容をコピーする        |
| p          | コピーした内容を貼り付ける      |
| yw         | 単語を１つコピー        |
| yy         | １文をコピー          |
※選択範囲の指定は`v`でも対応可

## オプションの設定
--------------------------------------------------------------
| 操作ボタン  |     機能    |
|:-----------|------------:|
| :set hls   | highlightsearchの略で検索の対象語がハイライト表示|
| :set is    | incsearchの略で検索対象語を入力するとハイライト化|
| :set ic    | ignorecaseの略で検索時に大文字小文字を区別しない|
| :set is    | 検索文字に部分適合している部分を表示    |
| left       | right       |
| aligned    | aligned     |
※オプションを止めるには`no`を付けて実行　(例) :set noic

## ヘルプウィンドウ
--------------------------------------------------------------
ヘルプウィンドウを開くには`:help`, `F!`, `HELP`のどれかを押す
ヘルプウィンドウの終了は`:q`を押す

簡単ではありますが、Vimの操作説明をしてみました。